<script is:inline>
	const enableDarkMode = () => {
		localStorage.setItem('dark', '1');
	};

	const disableDarkMode = () => {
		localStorage.setItem('dark', '0');
	};

	const isDarkMode = () => {
		return localStorage.getItem('dark') === '1' || (
			localStorage.getItem('dark') === null &&
			window.matchMedia('(prefers-color-scheme: dark)').matches
		);
	};

	const applyDarkModeStyles = () => {
		document.documentElement.classList.add('dark');
	};

	const revokeDarkModeStyles = () => {
		document.documentElement.classList.remove('dark');
	};

	const toggleDarkMode = () => {
		if (isDarkMode()) {
			disableDarkMode();
			revokeDarkModeStyles();
		} else {
			enableDarkMode();
			applyDarkModeStyles();
		}
	};

	if (isDarkMode()) {
		applyDarkModeStyles();
	}

	window.document.addEventListener('DOMContentLoaded', () => {
		document.getElementById('switch').addEventListener('click', () => toggleDarkMode());
	});
</script>
