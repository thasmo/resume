---
import { useMessages } from '../utilities/localization';

const locale = Astro.currentLocale;

const m = useMessages(locale);

const { title = m('site_title') } = Astro.props;
---
<head>
	<meta charset="utf-8" />

	<title>{title}</title>

	<link rel="preload" as="image" href="https://avatar.thasmo.com/" />
	<link href="https://avatar.thasmo.com/" rel="icon" />

	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta name="description" content={m('site_description')} />
	<meta property="og:image" content="https://avatar.thasmo.com/" />

	<slot />

	<script>
		if (localStorage.getItem('dark') === '1' || (localStorage.getItem('dark') === null && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
			document.documentElement.classList.add('dark');
		}
	</script>
</head>
